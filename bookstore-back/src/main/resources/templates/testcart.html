<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shopping Cart</title>
    <script>
        async function fetchCart() {
            const customerId = document.getElementById('customerId').value;
            const response = await fetch(`/api/cart/${customerId}`);
            const cart = await response.json();
            document.getElementById('cartItems').innerText = JSON.stringify(cart.items, null, 2);
        }

        async function addToCart() {
            const customerId = document.getElementById('customerId').value;
            const book = {
                bookId: parseInt(document.getElementById('bookId').value),
                title: document.getElementById('title').value,
                price: parseFloat(document.getElementById('price').value)
            };
            await fetch(`/api/cart/${customerId}/add`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(book)
            });
            fetchCart();
        }

        async function updateCartItem() {
            const customerId = document.getElementById('customerId').value;
            const book = {
                bookId: parseInt(document.getElementById('bookId').value),
                title: document.getElementById('title').value,
                price: parseFloat(document.getElementById('price').value)
            };
            const quantity = parseInt(document.getElementById('quantity').value);
            await fetch(`/api/cart/${customerId}/update?quantity=${quantity}`, {
                method: 'PUT',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(book)
            });
            fetchCart();
        }

        async function removeFromCart() {
            const customerId = document.getElementById('customerId').value;
            const book = {
                bookId: parseInt(document.getElementById('bookId').value),
                title: document.getElementById('title').value,
                price: parseFloat(document.getElementById('price').value)
            };
            await fetch(`/api/cart/${customerId}/remove`, {
                method: 'DELETE',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(book)
            });
            fetchCart();
        }

        async function clearCart() {
            const customerId = document.getElementById('customerId').value;
            await fetch(`/api/cart/${customerId}/clear`, {
                method: 'DELETE'
            });
            fetchCart();
        }
    </script>
</head>

<body>
    <h1>Shopping Cart</h1>

    <div>
        <label for="customerId">Customer ID:</label>
        <input type="number" id="customerId">
    </div>

    <h2>Manage Cart</h2>

    <div>
        <label for="bookId">Book ID:</label>
        <input type="number" id="bookId">
    </div>

    <div>
        <label for="title">Book Title:</label>
        <input type="text" id="title">
    </div>

    <div>
        <label for="price">Price:</label>
        <input type="number" step="0.01" id="price">
    </div>

    <div>
        <label for="quantity">Quantity:</label>
        <input type="number" id="quantity">
    </div>

    <button onclick="fetchCart()">Fetch Cart</button>
    <button onclick="addToCart()">Add to Cart</button>
    <button onclick="updateCartItem()">Update Cart Item</button>
    <button onclick="removeFromCart()">Remove from Cart</button>
    <button onclick="clearCart()">Clear Cart</button>

    <h2>Cart Items</h2>
    <pre id="cartItems">{}</pre>
</body>

</html>